import{J as f,r as n,x as N,j as e,Q as y}from"./app-Bn18S2az.js";import{N as k}from"./Navbar-eL5_xINR.js";import"./proxy-BtnhdsBh.js";function D(){const{props:l}=f(),[w,g]=n.useState(null),[i,d]=n.useState(!1),[h,b]=n.useState(new Date().toTimeString().slice(0,5)),{data:t,setData:r,post:p,processing:o,errors:s,reset:j}=N({type:"",visit_date:new Date().toISOString().split("T")[0],visit_time:new Date().toTimeString().slice(0,5),child_name:"",child_address:"",general_name:"",general_address:"",institution:"",notes:""});n.useEffect(()=>{c();const a=setInterval(()=>{const u=new Date().toTimeString().slice(0,5);b(u),r("visit_time",u)},1e3);return()=>clearInterval(a)},[]);const c=async()=>{try{const x=await(await fetch("/daftar-hadir/stats")).json();g(x)}catch(a){console.error("Error fetching stats:",a)}},v=a=>{a.preventDefault(),d(!0),p("/daftar-hadir",{onSuccess:()=>{j(),r({type:"",visit_date:new Date().toISOString().split("T")[0],visit_time:new Date().toTimeString().slice(0,5),child_name:"",child_address:"",general_name:"",general_address:"",institution:"",notes:""}),c()},onFinish:()=>{d(!1)}})},m=a=>{r({...t,type:a,child_name:"",child_address:"",general_name:"",general_address:"",institution:"",notes:""})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Daftar Hadir Perpustakaan - Warung Pasinaon"}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(k,{}),e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 lg:px-8 py-12",children:[typeof l.success=="string"&&e.jsx("div",{className:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:e.jsx("span",{className:"block sm:inline",children:l.success})}),s.duplicate&&e.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400 mt-0.5 mr-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Nama Sudah Terdaftar"}),e.jsx("div",{className:"mt-1 text-sm text-red-700",children:s.duplicate})]})]})}),s.general&&e.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsx("span",{className:"block sm:inline",children:s.general})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Daftar Hadir Perpustakaan"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Silakan isi daftar hadir untuk mencatat kunjungan Anda ke TBM Warung Pasinaon. Data ini membantu kami memahami kebutuhan pengunjung."})]}),e.jsx("div",{className:"mb-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5 mr-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Informasi Penting"}),e.jsx("div",{className:"mt-1 text-sm text-blue-700",children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Setiap orang hanya bisa mengisi daftar hadir sekali per hari"}),e.jsx("li",{children:"Waktu kunjungan otomatis mengikuti waktu saat ini"}),e.jsx("li",{children:"Pastikan nama yang dimasukkan sudah benar"})]})})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Kategori Pengunjung *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>m("child"),className:`p-6 border-2 rounded-lg transition-all ${t.type==="child"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"👶"}),e.jsx("div",{className:"font-semibold",children:"Anak-anak"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Untuk pengunjung usia anak"})]})}),e.jsx("button",{type:"button",onClick:()=>m("general"),className:`p-6 border-2 rounded-lg transition-all ${t.type==="general"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"🧑‍🎓"}),e.jsx("div",{className:"font-semibold",children:"Umum"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Untuk remaja dan dewasa"})]})})]}),s.type&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.type})]}),t.type&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Kunjungan"}),e.jsx("input",{type:"date",value:t.visit_date,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 cursor-not-allowed",disabled:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Tanggal otomatis mengikuti hari ini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waktu Kunjungan"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 cursor-not-allowed",disabled:!0}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400 animate-pulse",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Waktu otomatis mengikuti waktu saat ini"})]})]}),t.type==="child"&&e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Data Anak-anak"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap Anak *"}),e.jsx("input",{type:"text",value:t.child_name,onChange:a=>r("child_name",a.target.value),placeholder:"Masukkan nama lengkap anak",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nama akan otomatis diubah menjadi huruf besar semua"}),s.child_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.child_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alamat Lengkap *"}),e.jsx("textarea",{value:t.child_address,onChange:a=>r("child_address",a.target.value),placeholder:"Masukkan alamat lengkap",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.child_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.child_address})]})]})]}),t.type==="general"&&e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Data Pengunjung Umum"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap *"}),e.jsx("input",{type:"text",value:t.general_name,onChange:a=>r("general_name",a.target.value),placeholder:"Masukkan nama lengkap",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nama akan otomatis diubah menjadi huruf besar semua"}),s.general_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.general_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alamat Lengkap *"}),e.jsx("textarea",{value:t.general_address,onChange:a=>r("general_address",a.target.value),placeholder:"Masukkan alamat lengkap",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),s.general_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.general_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institusi/Lembaga *"}),e.jsx("input",{type:"text",value:t.institution,onChange:a=>r("institution",a.target.value),placeholder:"Sekolah, Universitas, Perusahaan, dll",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Contoh: SD Negeri 1, Universitas Gadjah Mada, PT. ABC, dsb."}),s.institution&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.institution})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keterangan (Opsional)"}),e.jsx("textarea",{value:t.notes,onChange:a=>r("notes",a.target.value),placeholder:"Keterangan tambahan jika ada",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]}),t.type&&e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",disabled:o||i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200 text-lg",children:o||i?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):"Daftar Hadir"})})]})})]})]})]})}export{D as default};
